<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 æ–°å¹´å¿«ä¹ - æå®¢äº¤äº’ç‰ˆ</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505; /* æ·±ç©ºç°é»‘ï¼Œæ¯”çº¯é»‘æ›´æœ‰è´¨æ„Ÿ */
            font-family: "Microsoft YaHei", sans-serif;
            touch-action: none; /* ç¦æ­¢æ‰‹æœºä¸‹æ‹‰åˆ·æ–° */
        }
        canvas {
            display: block;
        }
        /* å¯åŠ¨é®ç½©å±‚ */
        #start-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.8s;
            backdrop-filter: blur(5px);
        }
        #start-btn {
            padding: 15px 40px;
            font-size: 24px;
            color: #fff;
            background: linear-gradient(45deg, #ff3333, #ff9933);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 80, 80, 0.5);
            animation: pulse 1.5s infinite;
            letter-spacing: 2px;
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 80, 80, 0.5); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(255, 80, 80, 0.8); }
            100% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 80, 80, 0.5); }
        }
        .tips {
            margin-top: 15px;
            color: #aaa;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <div id="start-overlay">
        <button id="start-btn">å¼€å¯ 2026 æ–°å¹´ä¹‹æ—… ğŸš€</button>
        <div class="tips">ç”µè„‘ç«¯ç§»åŠ¨é¼ æ ‡ â€¢ æ‰‹æœºç«¯ç‚¹å‡»å±å¹• äº’åŠ¨</div>
    </div>

    <canvas id="canvas"></canvas>

    <audio id="bg-music" loop>
        <source src="https://music.163.com/song/media/outer/url?id=1387581250.mp3" type="audio/mpeg">
    </audio>

<script>
/**
 * 2026 ç²’å­ç‰¹æ•ˆ - æå®¢å‡çº§ç‰ˆ
 * åŒ…å«ï¼šé¼ æ ‡æ–¥åŠ›åœºã€æµå…‰æ‹–å°¾ã€æ˜Ÿç©ºèƒŒæ™¯ã€è‡ªé€‚åº”æ€§èƒ½
 */

const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let width, height;
let particles = [];
let fireworks = [];
let stars = [];
let textTimeline = 0;

// äº¤äº’é¼ æ ‡ä½ç½®
const mouse = { x: null, y: null, radius: 100 };

// é…ç½®å‚æ•°
const IS_MOBILE = window.innerWidth < 768;
const PARTICLE_GAP = IS_MOBILE ? 6 : 4; // æ‰‹æœºç«¯å‡å°‘é‡‡æ ·å¯†åº¦
const PARTICLE_SIZE = IS_MOBILE ? 2.5 : 2; 
const MOUSE_RADIUS = 120; // é¼ æ ‡äº’åŠ¨èŒƒå›´

// æ–‡æ¡ˆæµç¨‹
const TEXT_LIST = [
    "âœ¨", "å†è§ 2025", "3", "2", "1",
    "2026", "æ–°å¹´å¿«ä¹", "ä¸‡äº‹èƒœæ„", "å¹³å®‰å–œä¹", "â¤ï¸"
];

// åˆå§‹åŒ–ç”»å¸ƒ
function initCanvas() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
    createStars(); // é‡ç½®æ˜Ÿç©º
}

// === æ˜Ÿç©ºèƒŒæ™¯ç³»ç»Ÿ ===
class Star {
    constructor() {
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.size = Math.random() * 1.5;
        this.blinkSpeed = 0.02 + Math.random() * 0.03;
        this.alpha = Math.random();
        this.direction = 1;
    }
    update() {
        this.alpha += this.blinkSpeed * this.direction;
        if (this.alpha >= 1 || this.alpha <= 0.2) this.direction *= -1;
    }
    draw() {
        ctx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
    }
}
function createStars() {
    stars = [];
    const count = IS_MOBILE ? 50 : 150;
    for (let i = 0; i < count; i++) stars.push(new Star());
}

// === æ ¸å¿ƒç²’å­ç³»ç»Ÿ (å¸¦ç‰©ç†äº¤äº’) ===
class Particle {
    constructor(x, y, color) {
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.baseX = x; // è®°å½•ç›®æ ‡å½’ä½ç‚¹
        this.baseY = y;
        this.targetX = x; 
        this.targetY = y;
        this.color = color;
        this.size = PARTICLE_SIZE;
        this.density = (Math.random() * 30) + 1; // ç”¨äºè®¡ç®—é¼ æ ‡æ¨åŠ›
        this.ease = 0.05 + Math.random() * 0.05; 
    }

    update() {
        // 1. é¼ æ ‡äº¤äº’ç‰©ç†é€»è¾‘
        let dx = mouse.x - this.x;
        let dy = mouse.y - this.y;
        let distance = Math.sqrt(dx * dx + dy * dy);
        let forceDirectionX = dx / distance;
        let forceDirectionY = dy / distance;
        let maxDistance = mouse.radius;
        let force = (maxDistance - distance) / maxDistance;
        let directionX = forceDirectionX * force * this.density;
        let directionY = forceDirectionY * force * this.density;

        if (distance < mouse.radius) {
            // å¦‚æœé¼ æ ‡é è¿‘ï¼Œç²’å­è¢«æ¨å¼€
            this.x -= directionX * 5; 
            this.y -= directionY * 5;
        } else {
            // å¦åˆ™ï¼Œç²’å­ç¼“æ…¢å›åˆ°ç›®æ ‡ä½ç½® (baseX/baseY æ˜¯æ–‡å­—ä½ç½®)
            // è¿™é‡ŒåŠ å…¥ targetX æ˜¯ä¸ºäº†æ”¯æŒæ–‡å­—åˆ‡æ¢æ—¶çš„ç§»åŠ¨
            let homeDx = this.targetX - this.x;
            let homeDy = this.targetY - this.y;
            this.x += homeDx * this.ease;
            this.y += homeDy * this.ease;
        }
    }

    draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
    }
}

// === çƒŸèŠ±ç³»ç»Ÿ (ä¼˜åŒ–æ‹–å°¾) ===
class Firework {
    constructor() {
        this.x = Math.random() * width;
        this.y = height;
        this.targetY = Math.random() * (height / 3);
        this.speed = 8 + Math.random() * 4;
        this.angle = -Math.PI / 2 + (Math.random() - 0.5) * 0.3;
        this.vx = Math.cos(this.angle) * this.speed;
        this.vy = Math.sin(this.angle) * this.speed;
        this.hue = Math.random() * 360;
        this.particles = [];
        this.exploded = false;
        this.dead = false;
    }

    update() {
        if (!this.exploded) {
            this.x += this.vx;
            this.y += this.vy;
            this.vy += 0.15; // é‡åŠ›
            if (this.vy >= 0 || this.y <= this.targetY) this.explode();
        } else {
            // çƒŸèŠ±çˆ†ç‚¸åçš„ç²’å­é€»è¾‘
            for (let i = this.particles.length - 1; i >= 0; i--) {
                let p = this.particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.08; 
                p.alpha -= 0.015; // æ¶ˆå¤±é€Ÿåº¦
                if (p.alpha <= 0) this.particles.splice(i, 1);
            }
            if (this.particles.length === 0) this.dead = true;
        }
    }

    explode() {
        this.exploded = true;
        // å¢åŠ çˆ†ç‚¸ç²’å­æ•°é‡ï¼Œæ›´åä¸½
        const count = IS_MOBILE ? 50 : 100;
        for (let i = 0; i < count; i++) {
            let angle = Math.random() * Math.PI * 2;
            let speed = Math.random() * 4 + 1; // éšæœºé€Ÿåº¦å±‚æ¬¡
            this.particles.push({
                x: this.x,
                y: this.y,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed,
                alpha: 1,
                color: `hsla(${this.hue}, 100%, 60%,` // æ›´äº®çš„é¢œè‰²
            });
        }
    }

    draw() {
        if (!this.exploded) {
            ctx.fillStyle = `hsl(${this.hue}, 100%, 70%)`;
            ctx.beginPath();
            ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
            ctx.fill();
        } else {
            for (let p of this.particles) {
                ctx.fillStyle = p.color + p.alpha + ')';
                ctx.beginPath();
                ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                ctx.fill();
            }
        }
    }
}

// === æ–‡å­—å–æ ·é€»è¾‘ (æ”¯æŒæ¸å˜è‰²) ===
function getTextCoordinates(text) {
    const offCanvas = document.createElement('canvas');
    const offCtx = offCanvas.getContext('2d');
    offCanvas.width = width;
    offCanvas.height = height;

    let fontSize = IS_MOBILE ? 50 : 140;
    offCtx.font = `900 ${fontSize}px "Microsoft YaHei", sans-serif`;
    offCtx.textAlign = 'center';
    offCtx.textBaseline = 'middle';

    // åˆ›å»ºæ–‡å­—çš„æµå…‰æ¸å˜è‰²
    const gradient = offCtx.createLinearGradient(0, 0, width, 0);
    gradient.addColorStop(0, '#ff3333'); // çº¢
    gradient.addColorStop(0.5, '#ffd700'); // é‡‘
    gradient.addColorStop(1, '#ff3333'); // çº¢
    offCtx.fillStyle = gradient;
    
    offCtx.fillText(text, width / 2, height / 2);

    const imageData = offCtx.getImageData(0, 0, width, height).data;
    const coords = [];
    
    for (let y = 0; y < height; y += PARTICLE_GAP) {
        for (let x = 0; x < width; x += PARTICLE_GAP) {
            const index = (y * width + x) * 4;
            if (imageData[index + 3] > 128) {
                // è¯»å–åƒç´ åŸæœ¬çš„é¢œè‰²ï¼Œå®ç°æ¸å˜ç²’å­çš„æ•ˆæœ
                const r = imageData[index];
                const g = imageData[index + 1];
                const b = imageData[index + 2];
                coords.push({ 
                    x, 
                    y, 
                    color: `rgb(${r},${g},${b})` 
                });
            }
        }
    }
    return coords;
}

function changeText(text) {
    const coords = getTextCoordinates(text);
    // æ™ºèƒ½é‡ç”¨ä¸è¡¥é½
    for (let i = 0; i < coords.length; i++) {
        if (i < particles.length) {
            particles[i].targetX = coords[i].x;
            particles[i].targetY = coords[i].y;
            particles[i].baseX = coords[i].x; // æ›´æ–°å½’ä½ç‚¹
            particles[i].baseY = coords[i].y;
            particles[i].color = coords[i].color;
        } else {
            // æ–°äº§ç”Ÿçš„ç²’å­ä»éšæœºä½ç½®é£å…¥
            let p = new Particle(coords[i].x, coords[i].y, coords[i].color);
            p.x = Math.random() * width;
            p.y = Math.random() * height;
            particles.push(p);
        }
    }
    // å¤šä½™ç²’å­å¤„ç†ï¼šè®©å®ƒä»¬æ…¢æ…¢æ¶ˆå¤±è€Œä¸æ˜¯ç›´æ¥æˆªæ–­
    if (particles.length > coords.length) {
        particles.splice(coords.length);
    }
}

// === åŠ¨ç”»ä¸»å¾ªç¯ (å…³é”®æ¸²æŸ“ä¼˜åŒ–) ===
function animate() {
    // æ ¸å¿ƒç‰¹æ•ˆï¼šä½¿ç”¨åŠé€æ˜é»‘è‰²è¦†ç›–ï¼Œäº§ç”Ÿé•¿æ›å…‰æ‹–å°¾æ•ˆæœ
    // 0.1 çš„é€æ˜åº¦è¶Šä½ï¼Œæ‹–å°¾è¶Šé•¿
    ctx.fillStyle = 'rgba(0, 0, 0, 0.15)'; 
    ctx.fillRect(0, 0, width, height);

    // å¯ç”¨å åŠ æ¨¡å¼ï¼Œè®©é‡å çš„ç²’å­å‘å…‰ï¼ˆNeon Effectï¼‰
    ctx.globalCompositeOperation = 'lighter';

    // 1. ç»˜åˆ¶æ˜Ÿç©º
    stars.forEach(star => { star.update(); star.draw(); });

    // 2. ç»˜åˆ¶çƒŸèŠ±
    if (Math.random() < 0.03) fireworks.push(new Firework());
    for (let i = fireworks.length - 1; i >= 0; i--) {
        fireworks[i].update();
        fireworks[i].draw();
        if (fireworks[i].dead) fireworks.splice(i, 1);
    }

    // 3. ç»˜åˆ¶æ–‡å­—ç²’å­
    particles.forEach(p => { p.update(); p.draw(); });

    // æ¢å¤é»˜è®¤æ··åˆæ¨¡å¼
    ctx.globalCompositeOperation = 'source-over';

    requestAnimationFrame(animate);
}

// è‡ªåŠ¨æµç¨‹
let step = 0;
function nextStep() {
    if (step >= TEXT_LIST.length) step = 5; // å¾ªç¯ç¥ç¦è¯­
    changeText(TEXT_LIST[step]);
    
    let duration = 2200;
    if (["3", "2", "1"].includes(TEXT_LIST[step])) duration = 1200;
    
    step++;
    setTimeout(nextStep, duration);
}

// === äº‹ä»¶ç›‘å¬ ===
// é¼ æ ‡ç§»åŠ¨
window.addEventListener('mousemove', e => {
    mouse.x = e.x;
    mouse.y = e.y;
});
// è§¦æ‘¸ç§»åŠ¨ (æ‰‹æœºé€‚é…)
window.addEventListener('touchmove', e => {
    e.preventDefault();
    mouse.x = e.touches[0].clientX;
    mouse.y = e.touches[0].clientY;
}, { passive: false });
// é¼ æ ‡ç¦»å¼€
window.addEventListener('mouseout', () => {
    mouse.x = undefined;
    mouse.y = undefined;
});

window.addEventListener('resize', initCanvas);

// === å¯åŠ¨é€»è¾‘ ===
document.getElementById('start-btn').addEventListener('click', () => {
    document.getElementById('start-overlay').style.opacity = 0;
    setTimeout(() => {
        document.getElementById('start-overlay').style.display = 'none';
    }, 800);
    
    const audio = document.getElementById('bg-music');
    audio.play().catch(e => console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨æƒé™"));
    
    initCanvas();
    animate();
    nextStep();
});

// åˆå§‹ä¹Ÿæ˜¯è¦è¿è¡Œä¸€ä¸‹ï¼Œé˜²æ­¢é»‘å±
initCanvas();

</script>
</body>
</html>